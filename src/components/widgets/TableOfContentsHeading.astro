---
/**
 * TableOfContentsHeading Component
 * 
 * Recursive component for rendering TOC headings with nested subheadings.
 * Uses proper TypeScript types and safe property access.
 */

import type { Heading } from "@/types";
import LinkWrapper from "@/components/common/LinkWrapper.astro";

// Extended heading type with subheadings
interface TocHeading extends Heading {
  subheadings: TocHeading[];
}

interface Props {
  heading: TocHeading;
}

const { heading } = Astro.props;

// Safely check for subheadings
const hasSubheadings = heading.subheadings && heading.subheadings.length > 0;
---

<li class="list-inside">
  <LinkWrapper href={`#${heading.slug}`} underline>
    {heading.text}
  </LinkWrapper>
  
  {hasSubheadings && (
    <ul class="translate-x-3">
      {heading.subheadings.map((subheading: TocHeading) => (
        <Astro.self heading={subheading} />
      ))}
    </ul>
  )}
</li>